{"version":3,"sources":["utils/fetch.js"],"names":["Promise","require","module","exports","api","path","params","resolve","reject","wx","request","url","data","Object","assign","header","success","fail"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,YAAR,CAAhB;;AAEA;;;;;;;;AAQAC,OAAOC,OAAP,GAAiB,UAAUC,GAAV,EAAeC,IAAf,EAAqBC,MAArB,EAA6B;AAC5C,SAAO,IAAIN,OAAJ,CAAY,UAACO,OAAD,EAAUC,MAAV,EAAqB;AACtCC,OAAGC,OAAH,CAAW;AACTC,WAAQP,GAAR,SAAeC,IADN;AAETO,YAAMC,OAAOC,MAAP,CAAc,EAAd,EAAkBR,MAAlB,CAFG;AAGTS,cAAQ,EAAE,gBAAgB,MAAlB,EAHC;AAITC,eAAST,OAJA;AAKTU,YAAMT;AALG,KAAX;AAOD,GARM,CAAP;AASD,CAVD","file":"fetch.js","sourcesContent":["const Promise = require('./bluebird')\r\n\r\n/**\r\n * 抓取远端API的结构\r\n * https://developers.douban.com/wiki/?title=movie_v2\r\n * @param  {String} api    api 根地址\r\n * @param  {String} path   请求路径\r\n * @param  {Objece} params 参数\r\n * @return {Promise}       包含抓取任务的Promise\r\n */\r\nmodule.exports = function (api, path, params) {\r\n  return new Promise((resolve, reject) => {\r\n    wx.request({\r\n      url: `${api}/${path}`,\r\n      data: Object.assign({}, params),\r\n      header: { 'Content-Type': 'json' },\r\n      success: resolve,\r\n      fail: reject\r\n    })\r\n  })\r\n}\r\n"]}